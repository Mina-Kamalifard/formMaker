<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="FormBuilder.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
    <title>فرم ساز</title>
  </head>

  <body>
    <div class="formCreator">
      <div class="formMainTitle">فرم ساز</div>
      <div class="d-flex">
        <div class="sidebar">
          <div class="sidebar-item" data-type="h2">h2</div>
          <div class="sidebar-item" data-type="label">label</div>
          <div class="sidebar-item" data-type="text">text</div>
          <div class="sidebar-item" data-type="textarea">textarea</div>
          <div class="sidebar-item" data-type="button">button</div>
          <div class="sidebar-item has-children">
            input
            <div class="sidebar-submenu">
              <div class="sidebar-item" data-type="input-text">text</div>
              <div class="sidebar-item" data-type="input-number">number</div>
              <div class="sidebar-item" data-type="input-selectbox">
                selectbox
              </div>
              <div class="sidebar-item" data-type="input-checkbox">
                checkbox
              </div>
              <div class="sidebar-item" data-type="input-radio">radio</div>
            </div>
          </div>
        </div>

        <div id="h2AddForm" class="hidden">
          <h5>افزودن title</h5>
          <label>عنوان مورد نظر را وارد کنید:</label>
          <input id="h2Input" type="text" />

          <label>شروع از ستون:</label>
          <input id="h2ColStart" type="number" />

          <label>تعداد ستون:</label>
          <input id="h2ColSpan" type="number" />

          <label>شروع از سطر:</label>
          <input id="h2RowStart" type="number" />

          <label>تعداد سطر:</label>
          <input id="h2RowSpan" type="number" />

          <button id="h2AddButton" type="button" class="btn btn-info">
            افزودن
          </button>
        </div>

        <div id="labelAddForm" class="hidden">
          <h5>افزودن label</h5>
          <label>نام لیبل:</label>
          <input id="labelText" type="text" />

          <label>شروع از ستون:</label>
          <input id="labelColStart" type="number" />

          <label>چند ستون بگیرد:</label>
          <input id="labelColSpan" type="number" />

          <label>شروع از ردیف:</label>
          <input id="labelRowStart" type="number" />

          <label>چند ردیف بگیرد:</label>
          <input id="labelRowSpan" type="number" />

          <button id="labelAddButton" type="button" class="btn btn-info">
            افزودن
          </button>
        </div>
        <div id="textAddForm" class="hidden form-panel">
          <h5>افزودن text</h5>
          <label>متن دلخواه:</label>
          <input id="textAddContent" type="text" />

          <label>شروع از ستون:</label>
          <input id="textColStart" type="number" />

          <label>تعداد ستون:</label>
          <input id="textColSpan" type="number" />

          <label>شروع از سطر:</label>
          <input id="textRowStart" type="number" />

          <label>تعداد سطر:</label>
          <input id="textRowSpan" type="number" />

          <button id="textAddButton" type="button" class="btn btn-info">
            افزودن
          </button>
        </div>
        <div id="textareaAddForm" class="hidden">
          <h5>افزودن textarea</h5>
          <label>داده با چه نامی به بک اند ارسال شود ؟</label>
          <input
            id="textareaFieldName"
            type="text"
            placeholder="نام وارد شده باید مرتبط و انگلیسی باشد"
          />

          <label>شروع از ستون:</label>
          <input id="textareaColStart" type="number" />

          <label>تعداد ستون:</label>
          <input id="textareaColSpan" type="number" />

          <label>شروع از سطر:</label>
          <input id="textareaRowStart" type="number" />

          <label>تعداد سطر:</label>
          <input id="textareaRowSpan" type="number" />

          <label>آیا فیلد مورد نظر ضروری است یا خیر</label><br />
          <label>ضروری</label>
          <input type="radio" name="textareaRequiredField" value="required" />
          <label>غیر ضروری</label>
          <input type="radio" name="textareaRequiredField" value="optional" />

          <button id="textareaAddButton" type="button" class="btn btn-info">
            افزودن
          </button>
        </div>
        <div id="buttonAddForm" class="hidden">
          <h5>افزودن button</h5>
          <label for="">لیبل دکمه؟</label>
          <input type="text" />
          <label for="">رنگ دکمه؟</label>
          <br />
          <select>
            <option
              value="btn btn-primary"
              style="background-color: #007bff; color: #fff"
            >
              btn btn-primary
            </option>
            <option
              value="btn btn-secondary"
              style="background-color: #6c757d; color: #fff"
            >
              btn btn-secondary
            </option>
            <option
              value="btn btn-success"
              style="background-color: #28a745; color: #fff"
            >
              btn btn-success
            </option>
            <option
              value="btn btn-danger"
              style="background-color: #dc3545; color: #fff"
            >
              btn btn-danger
            </option>
            <option
              value="btn btn-warning"
              style="background-color: #ffc107; color: #212529"
            >
              btn btn-warning
            </option>
            <option
              value="btn btn-info"
              style="background-color: #17a2b8; color: #fff"
            >
              btn btn-info
            </option>
            <option
              value="btn btn-light"
              style="background-color: #f8f9fa; color: #212529"
            >
              btn btn-light
            </option>
            <option
              value="btn btn-dark"
              style="background-color: #343a40; color: #fff"
            >
              btn btn-dark
            </option>
            <option
              value="btn btn-link"
              style="background-color: #fff; color: #007bff"
            >
              btn btn-link
            </option>
          </select>
          <br />
          <label>شروع از ستون:</label>
          <input id="buttonAddColStart" type="number" />

          <label>تعداد ستون:</label>
          <input id="buttonAddColSpan" type="number" />

          <label>شروع از سطر:</label>
          <input id="buttonAddRowStart" type="number" />

          <label>تعداد سطر:</label>
          <input id="buttonAddRowSpan" type="number" />
          <button type="button" class="btn btn-info">افزودن</button>
        </div>
        <div id="inputTextAddForm" class="hidden">
          <h5>افزودن input(text)</h5>
          <label for="">داده با چه نامی به بک اند ارسال شود ؟</label>
          <input
            type="text"
            placeholder="نام وارد شده باید مرتبط و انگلیسی باشد"
          />

          <label>شروع از ستون:</label>
          <input id="inputTextColStart" type="number" />

          <label>چند ستون بگیرد:</label>
          <input id="inputTextColSpan" type="number" />

          <label>شروع از ردیف:</label>
          <input id="inputTextRowStart" type="number" />

          <label>چند ردیف بگیرد:</label>
          <input id="inputTextRowSpan" type="number" />

          <label for="">آیا فیلد مورد نظر ضروری است یا خیر</label><br />
          <label for="">ضروری</label>
          <input type="radio" name="requiredField" value="required" />
          <label for="">غیر ضروری</label>
          <input type="radio" name="requiredField" value="optional" />
          <button type="button" class="btn btn-info">افزودن</button>
        </div>

        <div id="inputNumberAddForm" class="hidden">
          <h5>افزودن input(number)</h5>
          <label for="">داده با چه نامی به بک اند ارسال شود ؟</label>
          <input
            type="text"
            placeholder="نام وارد شده باید مرتبط و انگلیسی باشد"
          />
          <label>شروع از ستون:</label>
          <input id="inputNumberColStart" type="number" />

          <label>چند ستون بگیرد:</label>
          <input id="inputNumberColSpan" type="number" />

          <label>شروع از ردیف:</label>
          <input id="inputNumberRowStart" type="number" />

          <label>چند ردیف بگیرد:</label>
          <input id="inputNumberRowSpan" type="number" />

          <label for="">آیا فیلد مورد نظر ضروری است یا خیر</label><br />
          <label for="">ضروری</label>
          <input type="radio" name="requiredField" value="required" />
          <label for="">غیر ضروری</label>
          <input type="radio" name="requiredField" value="optional" />
          <button type="button" class="btn btn-info">افزودن</button>
        </div>

        <div id="inputSelectboxAddForm" class="hidden">
          <h5>افزودن input(selectbox)</h5>

          <label for="">داده با چه نامی به بک اند ارسال شود ؟</label>
          <input
            type="text"
            placeholder="نام وارد شده باید مرتبط و انگلیسی باشد"
          />

          <label>شروع از ستون:</label>
          <input id="inputSelectColStart" type="number" />

          <label>چند ستون بگیرد:</label>
          <input id="inputSelectColSpan" type="number" />

          <label>شروع از ردیف:</label>
          <input id="inputSelectRowStart" type="number" />

          <label>چند ردیف بگیرد:</label>
          <input id="inputSelectRowSpan" type="number" />

          <label for="">تعداد option مورد نیاز</label>
          <input type="text" id="optionCountInput" />

          <button type="button" id="showOptionsBtn">
            باز شدن input برای وارد کردن option
          </button>

          <div id="optionsContainer"></div>

          <label for="">آیا فیلد مورد نظر ضروری است یا خیر</label><br />
          <label for="">ضروری</label>
          <input type="radio" name="requiredField" value="required" />
          <label for="">غیر ضروری</label>
          <input type="radio" name="requiredField" value="optional" />

          <button type="button" class="btn btn-info">افزودن</button>
        </div>
        <div id="inputCheckboxAddForm" class="hidden">
          <h5>افزودن input(checkbox)</h5>
          <label for="">داده با چه نامی به بک اند ارسال شود ؟</label>
          <input
            type="text"
            placeholder="نام وارد شده باید مرتبط و انگلیسی باشد"
          />

          <label>شروع از ستون:</label>
          <input id="inputCheckboxColStart" type="number" />

          <label>چند ستون بگیرد:</label>
          <input id="inputCheckboxColSpan" type="number" />

          <label>شروع از ردیف:</label>
          <input id="inputCheckboxRowStart" type="number" />

          <label>چند ردیف بگیرد:</label>
          <input id="inputCheckboxRowSpan" type="number" />

          <label for="">تعداد چک‌باکس مورد نیاز را وارد کنید:</label>
          <input type="number" id="checkboxCountInput" />

          <button type="button" id="generateCheckboxInputs">
            باز شدن input برای وارد کردن label چک‌باکس‌ها
          </button>

          <div id="checkboxLabelsContainer"></div>

          <div id="checkboxPreviewContainer" style="margin-top: 15px"></div>

          <label for="">آیا فیلد مورد نظر ضروری است یا خیر</label><br />
          <label for="">ضروری</label>
          <input type="radio" name="requiredField" value="required" />
          <label for="">غیر ضروری</label>
          <input type="radio" name="requiredField" value="optional" />

          <button type="button" class="btn btn-info" id="addCheckboxesBtn">
            افزودن
          </button>
        </div>
        <div id="inputRadioAddForm" class="hidden">
          <h5>افزودن input(radio)</h5>

          <label for="">داده با چه نامی به بک اند ارسال شود ؟</label>
          <input
            type="text"
            placeholder="نام وارد شده باید مرتبط و انگلیسی باشد"
          />

          <label>شروع از ستون:</label>
          <input id="inputRadioColStart" type="number" />

          <label>چند ستون بگیرد:</label>
          <input id="inputRadioColSpan" type="number" />

          <label>شروع از ردیف:</label>
          <input id="inputRadioRowStart" type="number" />

          <label>چند ردیف بگیرد:</label>
          <input id="inputRadioRowSpan" type="number" />

          <label for="">تعداد Radio مورد نیاز را وارد کنید:</label>
          <input type="number" id="radioCountInput" />

          <button type="button" id="generateRadioInputs">
            باز شدن input برای وارد کردن label رادیوها
          </button>

          <div id="radioLabelsContainer"></div>

          <div id="radioPreviewContainer" style="margin-top: 15px"></div>

          <label for="">آیا فیلد مورد نظر ضروری است یا خیر</label><br />
          <label for="">ضروری</label>
          <input type="radio" name="requiredField" value="required" />
          <label for="">غیر ضروری</label>
          <input type="radio" name="requiredField" value="optional" />

          <button type="button" class="btn btn-info" id="addRadiosBtn">
            افزودن
          </button>
        </div>
      </div>
    </div>

    <p class="m-auto text-center">
      تعداد ستون در این اندازه صفحه:
      <span id="currentGridColumns"></span>
    </p>

    <div class="showForm"></div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const sidebarItems = document.querySelectorAll(
          ".sidebar-item[data-type]"
        );
        const allPanels = document.querySelectorAll(
          "#h2AddForm, #labelAddForm, #inputTextAddForm, #inputNumberAddForm, #textAddForm, #inputCheckboxAddForm, #inputRadioAddForm, #inputSelectboxAddForm, #textareaAddForm, #buttonAddForm"
        );

        sidebarItems.forEach((item) => {
          item.addEventListener("click", () => {
            // Hide all panels
            allPanels.forEach((panel) => panel.classList.add("hidden"));

            // Get data-type attribute of clicked sidebar item
            const dataType = item.getAttribute("data-type");

            // Compose target panel ID from data-type
            let targetPanelId = "";

            if (dataType === "h2") targetPanelId = "h2AddForm";
            else if (dataType === "label") targetPanelId = "labelAddForm";
            else if (dataType === "input-text")
              targetPanelId = "inputTextAddForm";
            else if (dataType === "input-number")
              targetPanelId = "inputNumberAddForm";
            else if (dataType === "text") targetPanelId = "textAddForm";
            else if (dataType === "input-checkbox")
              targetPanelId = "inputCheckboxAddForm";
            else if (dataType === "input-radio")
              targetPanelId = "inputRadioAddForm";
            else if (dataType === "input-selectbox")
              targetPanelId = "inputSelectboxAddForm";
            else if (dataType === "textarea") targetPanelId = "textareaAddForm";
            else if (dataType === "button") targetPanelId = "buttonAddForm";

            if (targetPanelId) {
              const targetPanel = document.getElementById(targetPanelId);
              if (targetPanel) {
                targetPanel.classList.remove("hidden");
              }
            }
          });
        });
      });

      document.addEventListener("DOMContentLoaded", () => {
        const toggles = document.querySelectorAll(".sidebar-item.has-children");

        toggles.forEach((toggle) => {
          toggle.addEventListener("click", (e) => {
            // Only toggle if the click was directly on the parent, not inside submenu
            if (e.target === toggle) {
              const submenu = toggle.querySelector(".sidebar-submenu");
              submenu.classList.toggle("show");
            }
          });
        });
      });
      //-------------------------------------------------------------------------------------------------------//
      function updateGridColumns() {
        const gridColumns =
          getComputedStyle(showForm).getPropertyValue("--grid-columns") || "12";
        document.getElementById("currentGridColumns").textContent = gridColumns;
      }

      window.addEventListener("load", updateGridColumns);
      window.addEventListener("resize", updateGridColumns);
      //----------------------------------------------------------------------------------------------------------//
      const h2Input = document.getElementById("h2Input");
      const h2AddButton = document.getElementById("h2AddButton");
      const showForm = document.querySelector(".showForm");

      h2AddButton.addEventListener("click", function () {
        const value = h2Input.value.trim();
        const colStart = +document.getElementById("h2ColStart").value;
        const colSpan = +document.getElementById("h2ColSpan").value;
        const rowStart = +document.getElementById("h2RowStart").value;
        const rowSpan = +document.getElementById("h2RowSpan").value;

        if (!value) {
          alert("لطفا عنوان را وارد کنید.");
          return;
        }

        const h2 = document.createElement("h2");
        h2.textContent = value;
        h2.style.textAlign = "center";
        if (colStart && colSpan) {
          h2.style.gridColumn = `${colStart} / span ${colSpan}`;
        }
        if (rowStart && rowSpan) {
          h2.style.gridRow = `${rowStart} / span ${rowSpan}`;
        }

        showForm.appendChild(h2);
        h2Input.value = "";
        document.getElementById("h2ColStart").value = "";
        document.getElementById("h2ColSpan").value = "";
        document.getElementById("h2RowStart").value = "";
        document.getElementById("h2RowSpan").value = "";
      });
      //------------------------------------------------------------------------------------------------------------//
      const labelAddButton = document.getElementById("labelAddButton");
      labelAddButton.addEventListener("click", function () {
        const text = document.getElementById("labelText").value.trim();
        const colStart = +document.getElementById("labelColStart").value;
        const colSpan = +document.getElementById("labelColSpan").value;
        const rowStart = +document.getElementById("labelRowStart").value;
        const rowSpan = +document.getElementById("labelRowSpan").value;

        if (!text || !colStart || !colSpan || !rowStart || !rowSpan) {
          alert("لطفا همه مقادیر را کامل وارد کنید.");
          return;
        }

        const gridColumns = parseInt(
          getComputedStyle(showForm).getPropertyValue("--grid-columns") || 12
        );
        if (colStart > gridColumns || colStart + colSpan - 1 > gridColumns) {
          alert("تعداد ستون‌های انتخابی از grid خارج می‌شود!");
          return;
        }

        const label = document.createElement("label");
        label.textContent = text;
        label.style.gridColumn = `${colStart} / span ${colSpan}`;
        label.style.gridRow = `${rowStart} / span ${rowSpan}`;
        label.style.padding = "2px";

        showForm.appendChild(label);
        document.getElementById("labelText").value = "";
        document.getElementById("labelColStart").value = "";
        document.getElementById("labelColSpan").value = "";
        document.getElementById("labelRowStart").value = "";
        document.getElementById("labelRowSpan").value = "";
      });
      //-------------------------------------------------------------------------------------------------------//
      const textAddButton = document.getElementById("textAddButton");
      textAddButton.addEventListener("click", function () {
        const value = document.getElementById("textAddContent").value.trim();
        const colStart = +document.getElementById("textColStart").value;
        const colSpan = +document.getElementById("textColSpan").value;
        const rowStart = +document.getElementById("textRowStart").value;
        const rowSpan = +document.getElementById("textRowSpan").value;

        if (!value || !colStart || !colSpan || !rowStart || !rowSpan) {
          alert("لطفا همه مقادیر را کامل وارد کنید.");
          return;
        }

        const gridColumns = parseInt(
          getComputedStyle(showForm).getPropertyValue("--grid-columns") || 12
        );
        if (colStart > gridColumns || colStart + colSpan - 1 > gridColumns) {
          alert("تعداد ستون‌های انتخابی از grid خارج می‌شود!");
          return;
        }

        const text = document.createElement("p");
        text.textContent = value;
        text.style.gridColumn = `${colStart} / span ${colSpan}`;
        text.style.gridRow = `${rowStart} / span ${rowSpan}`;
        text.style.padding = "2px";

        showForm.appendChild(text);

        // Clear the input fields
        document.getElementById("textAddContent").value = "";
        document.getElementById("textColStart").value = "";
        document.getElementById("textColSpan").value = "";
        document.getElementById("textRowStart").value = "";
        document.getElementById("textRowSpan").value = "";
      });
      //--------------------------------------------------------------------------------------------------------------//
      const textareaAddButton = document.getElementById("textareaAddButton");

      textareaAddButton.addEventListener("click", function () {
        const fieldName = document
          .getElementById("textareaFieldName")
          .value.trim();
        const colStart = +document.getElementById("textareaColStart").value;
        const colSpan = +document.getElementById("textareaColSpan").value;
        const rowStart = +document.getElementById("textareaRowStart").value;
        const rowSpan = +document.getElementById("textareaRowSpan").value;

        const requiredRadio = document.querySelector(
          'input[name="textareaRequiredField"]:checked'
        );
        const isRequired = requiredRadio && requiredRadio.value === "required";

        if (!fieldName || !colStart || !colSpan || !rowStart || !rowSpan) {
          alert("لطفا همه مقادیر را کامل وارد کنید.");
          return;
        }

        const gridColumns = parseInt(
          getComputedStyle(showForm).getPropertyValue("--grid-columns") || 12
        );
        if (colStart > gridColumns || colStart + colSpan - 1 > gridColumns) {
          alert("تعداد ستون‌های انتخابی از grid خارج می‌شود!");
          return;
        }

        const textarea = document.createElement("textarea");
        textarea.name = fieldName;
        textarea.placeholder = fieldName;
        textarea.required = isRequired;
        textarea.style.gridColumn = `${colStart} / span ${colSpan}`;
        textarea.style.gridRow = `${rowStart} / span ${rowSpan}`;
        textarea.style.padding = "2px";
        textarea.style.minHeight = "50px";

        showForm.appendChild(textarea);

        // Clear inputs
        document.getElementById("textareaFieldName").value = "";
        document.getElementById("textareaColStart").value = "";
        document.getElementById("textareaColSpan").value = "";
        document.getElementById("textareaRowStart").value = "";
        document.getElementById("textareaRowSpan").value = "";
        const radios = document.querySelectorAll(
          'input[name="textareaRequiredField"]'
        );
        radios.forEach((radio) => (radio.checked = false));
      });
      //------------------------------------------------------------------------------------------------------------//

      // رویداد کلیک دکمه افزودن
      document
        .querySelector("#buttonAddForm button")
        .addEventListener("click", function () {
          // گرفتن مقادیر
          const label = document
            .querySelector('#buttonAddForm input[type="text"]')
            .value.trim();
          const colorClass = document
            .querySelector("#buttonAddForm select")
            .value.trim();

          const colStart = document.getElementById("buttonAddColStart").value;
          const colSpan = document.getElementById("buttonAddColSpan").value;
          const rowStart = document.getElementById("buttonAddRowStart").value;
          const rowSpan = document.getElementById("buttonAddRowSpan").value;

          // ساخت دکمه
          const btn = document.createElement("button");
          btn.innerText = label || "Button";
          btn.className = colorClass;

          // استایل گرید
          btn.style.gridColumnStart = colStart || "auto";
          btn.style.gridColumnEnd = colSpan ? `span ${colSpan}` : "auto";
          btn.style.gridRowStart = rowStart || "auto";
          btn.style.gridRowEnd = rowSpan ? `span ${rowSpan}` : "auto";

          // افزودن به فرم
          showForm.appendChild(btn);

          // پاک کردن ورودی‌ها
          document.querySelector('#buttonAddForm input[type="text"]').value =
            "";
          document.querySelector("#buttonAddForm select").selectedIndex = 0;
          document.getElementById("buttonAddColStart").value = "";
          document.getElementById("buttonAddColSpan").value = "";
          document.getElementById("buttonAddRowStart").value = "";
          document.getElementById("buttonAddRowSpan").value = "";
        });
      //----------------------------------------------------------------------------------------------------------------------------------//
      document
        .querySelector("#inputTextAddForm button")
        .addEventListener("click", function () {
          const name = document
            .querySelector('#inputTextAddForm input[type="text"]')
            .value.trim();

          const colStart = document.getElementById("inputTextColStart").value;
          const colSpan = document.getElementById("inputTextColSpan").value;
          const rowStart = document.getElementById("inputTextRowStart").value;
          const rowSpan = document.getElementById("inputTextRowSpan").value;

          const requiredValue = document.querySelector(
            '#inputTextAddForm input[name="requiredField"]:checked'
          );
          const isRequired =
            requiredValue && requiredValue.value === "required";

          const input = document.createElement("input");
          input.type = "text";
          input.name = name || "unnamedInput";
          input.placeholder = "ورودی کاربر";
          if (isRequired) input.required = true;

          // استایل گرید
          input.style.display = "grid";
          input.style.width = "100%";
          input.style.gridColumnStart = colStart || "auto";
          input.style.gridColumnEnd = colSpan ? `span ${colSpan}` : "auto";
          input.style.gridRowStart = rowStart || "auto";
          input.style.gridRowEnd = rowSpan ? `span ${rowSpan}` : "auto";

          showForm.appendChild(input);

          // پاک کردن فرم
          document.querySelector('#inputTextAddForm input[type="text"]').value =
            "";
          document.getElementById("inputTextColStart").value = "";
          document.getElementById("inputTextColSpan").value = "";
          document.getElementById("inputTextRowStart").value = "";
          document.getElementById("inputTextRowSpan").value = "";
          const checkedRadio = document.querySelector(
            '#inputTextAddForm input[name="requiredField"]:checked'
          );
          if (checkedRadio) checkedRadio.checked = false;
        });
      //---------------------------------------------------------------------------------------------------------------------//
      document
        .querySelector("#inputNumberAddForm button")
        .addEventListener("click", function () {
          // گرفتن نام input
          const name = document
            .querySelector('#inputNumberAddForm input[type="text"]')
            .value.trim();

          // گرفتن مقادیر گرید
          const colStart = document.getElementById("inputNumberColStart").value;
          const colSpan = document.getElementById("inputNumberColSpan").value;
          const rowStart = document.getElementById("inputNumberRowStart").value;
          const rowSpan = document.getElementById("inputNumberRowSpan").value;

          // بررسی required بودن فیلد
          const requiredValue = document.querySelector(
            '#inputNumberAddForm input[name="requiredField"]:checked'
          );
          const isRequired =
            requiredValue && requiredValue.value === "required";

          // ساخت input
          const input = document.createElement("input");
          input.type = "number";
          input.name = name || "unnamedInput";
          input.placeholder = "عدد وارد کنید";
          if (isRequired) input.required = true;

          // استایل گرید
          input.style.display = "block";
          input.style.width = "100%";
          input.style.height = "100%";
          input.style.boxSizing = "border-box";
          // grid-area روش بهتره
          input.style.gridArea = `${rowStart || "auto"} / ${
            colStart || "auto"
          } / span ${rowSpan || 1} / span ${colSpan || 1}`;

          // افزودن به فرم
          showForm.appendChild(input);

          // پاک کردن ورودی‌ها
          document.querySelector(
            '#inputNumberAddForm input[type="text"]'
          ).value = "";
          document.getElementById("inputNumberColStart").value = "";
          document.getElementById("inputNumberColSpan").value = "";
          document.getElementById("inputNumberRowStart").value = "";
          document.getElementById("inputNumberRowSpan").value = "";
          const checkedRadio = document.querySelector(
            '#inputNumberAddForm input[name="requiredField"]:checked'
          );
          if (checkedRadio) checkedRadio.checked = false;
        });
      //----------------------------------------------------------------------------------------------------------------------//
      document
        .getElementById("showOptionsBtn")
        .addEventListener("click", function () {
          const optionsContainer = document.getElementById("optionsContainer");
          optionsContainer.innerHTML = ""; // هر بار پاک کن

          const count = parseInt(
            document.getElementById("optionCountInput").value
          );

          if (isNaN(count) || count <= 0) {
            alert("تعداد option باید عدد مثبت باشد!");
            return;
          }

          for (let i = 1; i <= count; i++) {
            const input = document.createElement("input");
            input.type = "text";
            input.placeholder = `مقدار option شماره ${i}`;
            input.classList.add("option-value");
            optionsContainer.appendChild(input);
            optionsContainer.appendChild(document.createElement("br"));
          }
        });
      //-----------------------------------------------------------------------------------------------------------------------//
      // اسکریپت دکمه باز کردن inputهای option
      document
        .getElementById("showOptionsBtn")
        .addEventListener("click", function () {
          const optionsContainer = document.getElementById("optionsContainer");
          optionsContainer.innerHTML = ""; // پاک کردن قبلی‌ها

          const count = parseInt(
            document.getElementById("optionCountInput").value
          );

          if (isNaN(count) || count <= 0) {
            alert("تعداد option باید عدد مثبت باشد!");
            return;
          }

          for (let i = 1; i <= count; i++) {
            const input = document.createElement("input");
            input.type = "text";
            input.placeholder = `مقدار option شماره ${i}`;
            input.classList.add("option-value");
            optionsContainer.appendChild(input);
            optionsContainer.appendChild(document.createElement("br"));
          }
        });

      document
        .querySelector("#inputSelectboxAddForm .btn-info")
        .addEventListener("click", function () {
          const name = document
            .querySelector('#inputSelectboxAddForm input[type="text"]')
            .value.trim();

          const optionInputs = document.querySelectorAll(
            "#optionsContainer .option-value"
          );
          const options = [];
          optionInputs.forEach((input) => {
            if (input.value.trim()) {
              options.push(input.value.trim());
            }
          });

          if (options.length === 0) {
            alert("حداقل یک option وارد کنید!");
            return;
          }

          const colStart = document.getElementById("inputSelectColStart").value;
          const colSpan = document.getElementById("inputSelectColSpan").value;
          const rowStart = document.getElementById("inputSelectRowStart").value;
          const rowSpan = document.getElementById("inputSelectRowSpan").value;

          const requiredValue = document.querySelector(
            '#inputSelectboxAddForm input[name="requiredField"]:checked'
          );
          const isRequired =
            requiredValue && requiredValue.value === "required";

          // ساخت select
          const select = document.createElement("select");
          select.name = name || "unnamedSelect";
          if (isRequired) select.required = true;

          options.forEach((text) => {
            const option = document.createElement("option");
            option.text = text;
            option.value = text;
            select.appendChild(option);
          });

          // استایل grid
          select.style.display = "block";
          select.style.width = "100%";
          select.style.height = "100%";
          select.style.boxSizing = "border-box";
          select.style.gridColumnStart = colStart || "auto";
          select.style.gridColumnEnd = colSpan ? `span ${colSpan}` : "auto";
          select.style.gridRowStart = rowStart || "auto";
          select.style.gridRowEnd = rowSpan ? `span ${rowSpan}` : "auto";

          showForm.appendChild(select);

          // پاک کردن مقادیر
          document.querySelector(
            '#inputSelectboxAddForm input[type="text"]'
          ).value = "";
          document.getElementById("optionCountInput").value = "";
          document.getElementById("inputSelectColStart").value = "";
          document.getElementById("inputSelectColSpan").value = "";
          document.getElementById("inputSelectRowStart").value = "";
          document.getElementById("inputSelectRowSpan").value = "";
          document.getElementById("optionsContainer").innerHTML = "";
          const checkedRadio = document.querySelector(
            '#inputSelectboxAddForm input[name="requiredField"]:checked'
          );
          if (checkedRadio) checkedRadio.checked = false;
        });
      //----------------------------------------------------------------------------------------------------------------------//
      document
        .getElementById("generateCheckboxInputs")
        .addEventListener("click", function () {
          const count = parseInt(
            document.getElementById("checkboxCountInput").value
          );

          const container = document.getElementById("checkboxLabelsContainer");
          container.innerHTML = ""; // پاک کردن قبلی‌ها

          if (isNaN(count) || count <= 0) {
            alert("تعداد چک‌باکس باید بزرگتر از صفر باشد!");
            return;
          }

          for (let i = 1; i <= count; i++) {
            const label = document.createElement("label");
            label.textContent = `Label چک‌باکس شماره ${i}: `;

            const input = document.createElement("input");
            input.type = "text";
            input.classList.add("checkbox-label-input");

            container.appendChild(label);
            container.appendChild(input);
            container.appendChild(document.createElement("br"));
          }
        });
      //---------------------------------------------------------------------------------------------------------------------------//

      document
        .getElementById("addCheckboxesBtn")
        .addEventListener("click", function () {
          const name = document
            .querySelector('#inputCheckboxAddForm input[type="text"]')
            .value.trim();

          const colStart = document.getElementById(
            "inputCheckboxColStart"
          ).value;
          const colSpan = document.getElementById("inputCheckboxColSpan").value;
          const rowStart = document.getElementById(
            "inputCheckboxRowStart"
          ).value;
          const rowSpan = document.getElementById("inputCheckboxRowSpan").value;

          const requiredValue = document.querySelector(
            '#inputCheckboxAddForm input[name="requiredField"]:checked'
          );
          const isRequired =
            requiredValue && requiredValue.value === "required";

          // گرفتن label چک‌باکس‌ها
          const labelInputs = document.querySelectorAll(
            "#checkboxLabelsContainer .checkbox-label-input"
          );
          const labels = [];
          labelInputs.forEach((input) => {
            if (input.value.trim()) {
              labels.push(input.value.trim());
            }
          });

          if (labels.length === 0) {
            alert("حداقل یک label چک‌باکس وارد کنید!");
            return;
          }

          // ساخت div گروه چک‌باکس‌ها
          const checkboxGroup = document.createElement("div");
          checkboxGroup.style.display = "grid";
          checkboxGroup.style.gridTemplateColumns = "1fr";
          checkboxGroup.style.gridGap = "5px";
          checkboxGroup.style.width = "100%";
          checkboxGroup.style.height = "100%";
          checkboxGroup.style.boxSizing = "border-box";
          checkboxGroup.style.display = "flex";
          checkboxGroup.style.flexWrap = "wrap"; // اجازه میده چند ردیف بشه اگر فضا کم باشه
          checkboxGroup.style.gap = "10px";

          checkboxGroup.style.gridColumnStart = colStart || "auto";
          checkboxGroup.style.gridColumnEnd = colSpan
            ? `span ${colSpan}`
            : "auto";
          checkboxGroup.style.gridRowStart = rowStart || "auto";
          checkboxGroup.style.gridRowEnd = rowSpan ? `span ${rowSpan}` : "auto";

          labels.forEach((labelText) => {
            const wrapper = document.createElement("label");
            wrapper.style.display = "flex";
            wrapper.style.alignItems = "center";
            wrapper.style.gap = "5px";

            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.name = name || "unnamedCheckboxGroup";
            checkbox.value = labelText;
            if (isRequired) checkbox.required = true;

            wrapper.appendChild(checkbox);
            wrapper.appendChild(document.createTextNode(labelText));
            checkboxGroup.appendChild(wrapper);
          });

          showForm.appendChild(checkboxGroup);

          // پاک کردن فرم
          document.querySelector(
            '#inputCheckboxAddForm input[type="text"]'
          ).value = "";
          document.getElementById("inputCheckboxColStart").value = "";
          document.getElementById("inputCheckboxColSpan").value = "";
          document.getElementById("inputCheckboxRowStart").value = "";
          document.getElementById("inputCheckboxRowSpan").value = "";
          document.getElementById("checkboxCountInput").value = "";
          document.getElementById("checkboxLabelsContainer").innerHTML = "";
          const checkedRadio = document.querySelector(
            '#inputCheckboxAddForm input[name="requiredField"]:checked'
          );
          if (checkedRadio) checkedRadio.checked = false;
        });
      //-------------------------------------------------------------------------------------------------------------------//
      // ساخت inputهای label برای radioها
      document
        .getElementById("generateRadioInputs")
        .addEventListener("click", () => {
          const count = parseInt(
            document.getElementById("radioCountInput").value
          );
          const container = document.getElementById("radioLabelsContainer");
          container.innerHTML = "";

          if (isNaN(count) || count <= 0) {
            alert("تعداد radio باید بزرگتر از صفر باشد!");
            return;
          }

          for (let i = 1; i <= count; i++) {
            const label = document.createElement("label");
            label.textContent = `Label radio شماره ${i}: `;

            const input = document.createElement("input");
            input.type = "text";
            input.classList.add("radio-label-input");

            container.appendChild(label);
            container.appendChild(input);
            container.appendChild(document.createElement("br"));
          }
        });
      //----------------------------------------------------------------------------------------------------------------------------------//
      document.getElementById("addRadiosBtn").addEventListener("click", () => {
        const name = document
          .querySelector('#inputRadioAddForm > input[type="text"]')
          .value.trim();

        const colStart = document.getElementById("inputRadioColStart").value;
        const colSpan = document.getElementById("inputRadioColSpan").value;
        const rowStart = document.getElementById("inputRadioRowStart").value;
        const rowSpan = document.getElementById("inputRadioRowSpan").value;

        const requiredValue = document.querySelector(
          '#inputRadioAddForm input[name="requiredField"]:checked'
        );
        const isRequired = requiredValue && requiredValue.value === "required";

        const labelInputs = document.querySelectorAll(
          "#radioLabelsContainer .radio-label-input"
        );
        const labels = [];
        labelInputs.forEach((input) => {
          if (input.value.trim()) {
            labels.push(input.value.trim());
          }
        });

        if (labels.length === 0) {
          alert("حداقل یک label radio وارد کنید!");
          return;
        }

        // ساخت div گروه radio
        const radioGroup = document.createElement("div");
        radioGroup.style.display = "flex";
        radioGroup.style.flexWrap = "wrap";
        radioGroup.style.gap = "10px";
        radioGroup.style.width = "100%";
        radioGroup.style.height = "100%";
        radioGroup.style.boxSizing = "border-box";
        radioGroup.style.gridColumnStart = colStart || "auto";
        radioGroup.style.gridColumnEnd = colSpan ? `span ${colSpan}` : "auto";
        radioGroup.style.gridRowStart = rowStart || "auto";
        radioGroup.style.gridRowEnd = rowSpan ? `span ${rowSpan}` : "auto";

        labels.forEach((labelText) => {
          const wrapper = document.createElement("label");
          wrapper.style.display = "flex";
          wrapper.style.alignItems = "center";
          wrapper.style.gap = "5px";

          const radio = document.createElement("input");
          radio.type = "radio";
          radio.name = name || "unnamedRadioGroup";
          radio.value = labelText;
          if (isRequired) radio.required = true;

          wrapper.appendChild(radio);
          wrapper.appendChild(document.createTextNode(labelText));
          radioGroup.appendChild(wrapper);
        });

        showForm.appendChild(radioGroup);

        // پاک کردن فرم
        document.querySelector(
          '#inputRadioAddForm > input[type="text"]'
        ).value = "";
        document.getElementById("inputRadioColStart").value = "";
        document.getElementById("inputRadioColSpan").value = "";
        document.getElementById("inputRadioRowStart").value = "";
        document.getElementById("inputRadioRowSpan").value = "";
        document.getElementById("radioCountInput").value = "";
        document.getElementById("radioLabelsContainer").innerHTML = "";
        const checkedRadio = document.querySelector(
          '#inputRadioAddForm input[name="requiredField"]:checked'
        );
        if (checkedRadio) checkedRadio.checked = false;
      });
    </script>
  </body>
</html>
